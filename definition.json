{
    "connections":[
       {
          "configuration":{
             "data":{
                "sourceOutput":"document",
                "targetInput":"codeHookInput"
             }
          },
          "name":"FlowInputNodeFlowInputNode0Tocreate_promptLambdaFunctionNode0",
          "source":"FlowInputNode",
          "target":"create_prompt",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"functionResponse",
                "targetInput":"array"
             }
          },
          "name":"create_promptLambdaFunctionNode0ToIteratorNode_1IteratorNode0",
          "source":"create_prompt",
          "target":"IteratorNode_1",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"arrayItem",
                "targetInput":"arrayItem"
             }
          },
          "name":"IteratorNode_1IteratorNode0Toanswer_questPromptsNode0",
          "source":"IteratorNode_1",
          "target":"answer_quest",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"modelCompletion",
                "targetInput":"arrayItem"
             }
          },
          "name":"answer_questPromptsNode0ToCollectorNode_1CollectorNode0",
          "source":"answer_quest",
          "target":"CollectorNode_1",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"collectedArray",
                "targetInput":"codeHookInput"
             }
          },
          "name":"CollectorNode_1CollectorNode0Toevaluate_resultsLambdaFunctionNode0",
          "source":"CollectorNode_1",
          "target":"evaluate_results",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"functionResponse",
                "targetInput":"document"
             }
          },
          "name":"evaluate_resultsLambdaFunctionNode0ToFlowOutputNodeFlowOutputNode0",
          "source":"evaluate_results",
          "target":"FlowOutputNode",
          "type":"Data"
       },
       {
          "configuration":{
             "data":{
                "sourceOutput":"arraySize",
                "targetInput":"arraySize"
             }
          },
          "name":"IteratorNode_1IteratorNode1ToCollectorNode_1CollectorNode1",
          "source":"IteratorNode_1",
          "target":"CollectorNode_1",
          "type":"Data"
       }
    ],
    "nodes":[
       {
          "configuration":{
             "input":{
                
             }
          },
          "name":"FlowInputNode",
          "outputs":[
             {
                "name":"document",
                "type":"String"
             }
          ],
          "type":"Input"
       },
       {
          "configuration":{
             "output":{
                
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"document",
                "type":"String"
             }
          ],
          "name":"FlowOutputNode",
          "type":"Output"
       },
       {
          "configuration":{
             "prompt":{
                "sourceConfiguration":{
                   "inline":{
                      "inferenceConfiguration":{
                         "text":{
                            "maxTokens":1000,
                            "temperature":0.0,
                            "topK":50,
                            "topP":1.0
                         }
                      },
                      "modelId":"anthropic.claude-3-5-sonnet-20240620-v1:0",
                      "templateConfiguration":{
                         "text":{
                            "inputVariables":[
                               {
                                  "name":"arrayItem"
                               }
                            ],
                            "text":"Você é um assistente responsável por responder perguntas de lógica pensando passo a passo. Você deve sempre especificar o gabarito ao final da resposta.\n{{arrayItem}}"
                         }
                      },
                      "templateType":"TEXT"
                   }
                }
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"arrayItem",
                "type":"String"
             }
          ],
          "name":"answer_quest",
          "outputs":[
             {
                "name":"modelCompletion",
                "type":"String"
             }
          ],
          "type":"Prompt"
       },
       {
          "configuration":{
             "lambdaFunction":{
                "lambdaArn":"arn:aws:lambda:region:111222333444:function:nome-da-funcao-1"
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"codeHookInput",
                "type":"String"
             }
          ],
          "name":"create_prompt",
          "outputs":[
             {
                "name":"functionResponse",
                "type":"Array"
             }
          ],
          "type":"LambdaFunction"
       },
       {
          "configuration":{
             "iterator":{
                
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"array",
                "type":"Array"
             }
          ],
          "name":"IteratorNode_1",
          "outputs":[
             {
                "name":"arrayItem",
                "type":"String"
             },
             {
                "name":"arraySize",
                "type":"Number"
             }
          ],
          "type":"Iterator"
       },
       {
          "configuration":{
             "collector":{
                
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"arrayItem",
                "type":"String"
             },
             {
                "expression":"$.data",
                "name":"arraySize",
                "type":"Number"
             }
          ],
          "name":"CollectorNode_1",
          "outputs":[
             {
                "name":"collectedArray",
                "type":"Array"
             }
          ],
          "type":"Collector"
       },
       {
          "configuration":{
             "lambdaFunction":{
                "lambdaArn":"arn:aws:lambda:region:111222333444:function:nome-da-funcao-2"
             }
          },
          "inputs":[
             {
                "expression":"$.data",
                "name":"codeHookInput",
                "type":"Array"
             }
          ],
          "name":"evaluate_results",
          "outputs":[
             {
                "name":"functionResponse",
                "type":"String"
             }
          ],
          "type":"LambdaFunction"
       }
    ]
 }
